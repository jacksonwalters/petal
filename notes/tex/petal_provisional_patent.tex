% !TEX TS-program = pdflatex
% !TEX encoding = UTF-8 Unicode

% This is a simple template for a LaTeX document using the "article" class.
% See "book", "report", "letter" for other types of document.

\documentclass[11pt]{article} % use larger type; default would be 10pt

\usepackage[utf8]{inputenc} % set input encoding (not needed with XeLaTeX)

%%% Examples of Article customizations
% These packages are optional, depending whether you want the features they provide.
% See the LaTeX Companion or other references for full information.

%%% PAGE DIMENSIONS
\usepackage{geometry} % to change the page dimensions
\geometry{a4paper} % or letterpaper (US) or a5paper or....
% \geometry{margin=2in} % for example, change the margins to 2 inches all round
% \geometry{landscape} % set up the page for landscape
%   read geometry.pdf for detailed page layout information

\usepackage{graphicx} % support the \includegraphics command and options

% \usepackage[parfill]{parskip} % Activate to begin paragraphs with an empty line rather than an indent

%%% PACKAGES
\usepackage{booktabs} % for much better looking tables
\usepackage{array} % for better arrays (eg matrices) in maths
\usepackage{paralist} % very flexible & customisable lists (eg. enumerate/itemize, etc.)
\usepackage{verbatim} % adds environment for commenting out blocks of text & for better verbatim
\usepackage{subfig} % make it possible to include more than one captioned figure/table in a single float
\usepackage{amsmath}
\usepackage{amssymb}
% These packages are all incorporated in the memoir class to one degree or another...

%%% HEADERS & FOOTERS
\usepackage{fancyhdr} % This should be set AFTER setting up the page geometry
\pagestyle{fancy} % options: empty , plain , fancy
\renewcommand{\headrulewidth}{0pt} % customise the layout...
\lhead{}\chead{}\rhead{}
\lfoot{}\cfoot{\thepage}\rfoot{}

%%% SECTION TITLE APPEARANCE
\usepackage{sectsty}
\allsectionsfont{\sffamily\mdseries\upshape} % (See the fntguide.pdf for font help)
% (This matches ConTeXt defaults)

%%% ToC (table of contents) APPEARANCE
\usepackage[nottoc,notlof,notlot]{tocbibind} % Put the bibliography in the ToC
\usepackage[titles,subfigure]{tocloft} % Alter the style of the Table of Contents
\renewcommand{\cftsecfont}{\rmfamily\mdseries\upshape}
\renewcommand{\cftsecpagefont}{\rmfamily\mdseries\upshape} % No bold!

%%% END Article customizations

%%% The "real" document content comes below...

\title{Provisional Patent Application for Petal}
\author{Jackson Walters}
%\date{} % Activate to display a given date or no date (if empty),
         % otherwise the current date is printed 

\begin{document}
\maketitle

\section*{Notes}


\subsection*{Title \& Brief Description}
\noindent Petal: DIY vintage bottom bracket integrated, sensorless, brushless, DC 100-250w 6 pole stator, 4 pole rotor, mid-drive eBike motor.



\subsection*{Weds. 1/15/2020 (update 5/2020):} Round two at AA a success - got the 500w motor running at low power, ~6w. Step 1 complete! Here’s the plan: \\

\begin{itemize}
\item take apart existing motor, understand how it works - DONE
\item hook up oscilloscope, understand controller better - DONE
\end{itemize}

\begin{itemize}
\item learn to 3d print (tool training 3/22) - DONE
\item 3d print stator model for old school bottom bracket - DONE
\end{itemize}

\begin{itemize}
\item learn to lost wax/investment cast/machine/CNC to produce metal/iron stator core
\item embed/attach permanent magnets to BB spindle - DONE
\item shave down spindle and use bigger, stronger magnets
\item wind stator - DONE
\end{itemize}

\vspace{5mm}

\begin{itemize}
\item bench power supply, get spinning - DONE
\item 48v e-bike battery
\item cut bike frame to tabletop size
\item install BB motor + controller + battery
\end{itemize}

\vspace{5mm}

\begin{itemize}
\item test w/ cranks, *torque*
\end{itemize}

\vspace{5mm}

\begin{itemize}
\item install prototype e-motor on full bike
\item test prototype
\end{itemize}

\vspace{5mm}

\begin{itemize}
\item make a few working prototypes
\item hand out to others for testing/alpha
\end{itemize}

\vspace{5mm}

\begin{itemize}
\item make video documenting build process
\item make promo video for web
\end{itemize}

\vspace{5mm}

\begin{itemize}
\item launch website w/ video(s)
\item crowdfunding/beta
\end{itemize}

\vspace{5mm}

\begin{itemize}
\item solicit investors
\item patent
\item form llc/startup
\end{itemize}

\vspace{5mm}

\begin{itemize}
\item refine design
\item contract manufacturer
\item set up direct sale on website
\end{itemize}

\vspace{5mm}

\begin{itemize}
\item release v1
\end{itemize}

\subsection*{Materials Required}

\begin{itemize}
\item vintage bottom bracket w/ spindle, bearings, and cups
\item 48v battery
\item controller/driver
\item 4 strong, curved magnets
\item jb-weld epoxy
\item stator iron (3d print mold, then lost-wax cast)
\item copper wire
\end{itemize}

\subsection*{Implementation}

\noindent SOLVED: nylon/metal washer possibly with notches for bearing cups to compress stator. or just design the stator so that it juts out enough for the bearings to compress on. need so that stator stays centered and fixed (non-rotating) \\

\noindent use cable guide screw hole for wires \\


\subsection*{Weds. 1/22/2020:} heading to AA tonight to hook up motor to scope, possibly take apart 500w motor.

\subsection*{Fri. 5/1/2020:} 3d printed the stator, v2. This print was successful.


resources:
\begin{itemize}
\item printer = Prusa i3 MK3S
\item material = prusament PLA (galaxy purple)
\item amount = 16.64g
\item cost = \$.42
\item time = 2h12min
\end{itemize}
settings:
\begin{itemize}
\item slicer = PrusaSlicer
\item layer height = .20mm quality
\item infill = \%15
\item supports = none
\end{itemize}




v2 dimensions:
\begin{itemize}
\item $num\_poles$ = 6
\item $td$ = total diameter - 38mm ($=(1+pr)*od$)
\item $od$ = center ring outer diameter - 21mm
\item $id$ = center ring inner diameter - ~17mm
\item $h$ = height - 43mm
\item $pr$ = pole ratio - .65 $\Rightarrow$ pole length $\approx$ 6.5mm ($= pr*(od/2)$ )
\end{itemize}



Pretty damn close to the specifications for the generated object file.

For v3, I’ll need to have the inner diameter wide enough to fit over the races of the spindle.

\begin{itemize}
\item vintage bottom bracket dimensions:
\item center length = 43.5mm (bottom groove to bottom groove. ~45mm race to race)
\item spindle diameter = 16.5mm
\item square taper (small) = 13mm
\item square taper (large) = 14mm
\item race diameter = 21mm
\end{itemize}

standard bottom tube dimensions:
inner diameter = 34mm

v3 dimensions:
\begin{itemize}
\item num\_poles = 6
\item td = total diameter - 34mm
\item od = center ring outer diameter - 21mm
\item id = center ring inner diameter - ~17mm
\item h = height - 43mm
\item pr = pole ratio - .65 => pole length ~ 6.5mm (= pr*(od/2) )
\end{itemize}

\subsection*{~5:45pm: In progress.}

Printed successfully. With the inner diameter exactly matching the bearing race diameter, it was remarkably tight. With a lot of force and some time, I was able to get it past. It may make sense to leave it that small with a little internal sanding or something, but I’d prefer .1mm on each side and just have an inner diameter that’s .2mm bigger.

\subsection*{Sun. 5/10/20, ~8:30pm:}

Trying v4. This time, we have:

\begin{itemize}
\item $pole\_num$ =6
\item $id$=21.2mm
\item $od$=25.2mm
\item $height$ =43mm
\item $pol\_ratio$ =.25
\item $cap\_ratio$ =1.5
\item $resolution$ =400
\end{itemize}

\noindent I noticed that a problem I thought I have is not a problem. When I go to wrap the copper windings, it will bulge out a little on the sides, 1-3mm. I thought I might have to shave the stator height from 43mm to 40mm to compensate. However, there is a nice 3-4mm gap on either side between the bearing cage and the end of the cup. \\

\noindent Printing v4. Added a brim, turned the $bed_temp$ up to 70c, and turned the speed down on the first few layers. Making sure to have good adhesion. \\

\noindent v4 printing successfully, will take 1h3m, 15.95g. PLA @ $24.99/kg = $0.40. \\

\noindent Mon. 5/11/20: Realized that, with the bearing cups and cages, the available length for the stator ‘height’ is really 42mm, not 43mm. It may be that you can compress the stator, but probably only .2mm or so, which would allow for a nice snug fit. \\

\noindent Ordered some neodymium arc magnets from Apex Magnets. \\

\noindent v5 has height 42.1mm. \\

\subsection*{~7pm:} v5 finished printing. It’s still a little too big at 42.1mm. Will try 41.1mm. \\

\noindent  v4 is printed. It measures: \\

\begin{itemize}
\item $total\_diam = 34.5mm$
\item $id \approx 21.2mm$
\item $od \approx 25.1mm$
\item $pole\_length = 2.9mm$
\end{itemize}


\noindent Calculations: \\

\noindent Would like to calculate power. Need to know: \\

\begin{itemize}
\item wire gauge
\item number of winding
\item current
\item strength of magnets
\item geometry of setup
\item number of poles = 6
\end{itemize}

$$pole\_length = 2.9mm$$
$$pole\_width \approx 5mm$$

$$AWG \rightarrow diam \rightarrow num\_windings:$$

\begin{itemize}
\item $19 (1.8amp) \rightarrow .912mm \rightarrow 3$
\item $20 (1.5amp) \rightarrow .812mm \rightarrow 3$
\item $21 (1.2amp) \rightarrow .723 \rightarrow 4$
\item $22 (.92) = .644 \rightarrow 4$
\end{itemize}

\noindent Example: AWG 21, 1.2amp max power transmission, .723mm, 4 windings around pole, 6 layers. \\

\noindent 24 loops per pole. \\

\noindent Too hard - need to measure. At 48v, no more than 57watt. \\

\subsection*{Tues. 5/12/20:} Printing v7, height = 41.3mm. v6 fit perfectly, but not snugly. need some compression. \\

\subsection*{Thurs. 5/14/20:} Magnets arrived yesterday. At least one set fits very nicely, no need to shave down the spindle yet, and they stick right on so no immediate need for epoxy. Going to grab some copper wire, and eventually will need to find a 48v battery. \\

\subsection*{~10pm, Thurs. 5/14/20:} Found some magnet wire at ``You-Do-It” Electronics Center in Needham. 22 gauge. Bought a multimeter, cutters, and wire strippers at Home Depot. Wound the stator core, and was able to generate a few mA of current by spinning the spindle. \\

\subsection*{5/16/20:} Got a nice 30V, 5A variable Korad power supply for testing. Got 500w brushless motor spinning at 25W. \\

\subsection*{~6:32pm, 5/19/20:} Got some precision files to file down the notches near the end of the stator poles a bit more to better store the windings. They weren’t quite fitting into the gap in the bearing cups between the bearing cages and the stator itself. \\

\begin{itemize}
\item First test w/ power, spinning: https://www.youtube.com/watch?v=SrjFXLMFxuI
\item Spinning, brief: https://youtu.be/y2wRbTZY77E
\item 500w motor w/ Korad, test: https://youtu.be/1-twHIf9ygM
\item Generating power w/ multimeter: https://youtu.be/IRpmhwM5PVo
\item Spinning by hand: https://youtu.be/fcTMyOD5his
\end{itemize}

The motor is spinning when hooked up to the 3-phase controller. Without mounting to a cut frame or the like, the axle causes the bearing cups to spin off. There may be a pair of windings wired in the wrong direction as it’s doing some back and forth spinning. There are also no Hall sensors, which may be part of it. It is most likely just the vibration. \\

The bearing cups rubbing on the enamel coated magnet wire causes it to rub off a little and conduct on the metal, causing sparking. This can easily be alleviated by just filing the notches a bit more so that the stator completely encases the windings. \\


\end{document}
